<!DOCTYPE html><html><head><meta charset=utf-8><title>An Offline Life</title><style>body{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;width:100vw;margin:0;background-color:silver}#game{background-color:#eee;cursor:pointer}p{margin-inline-start:2%;margin-inline-end:2%}#online{display:none}#online.back{display:block}#online.back+.offline{display:none}</style></head><body><div><canvas id=game height=288 width=288></canvas></div><p id=online>You are online!</p><p class=offline>  You are offline! Find the right combination to get online!</p><script>/*
 * Kontra.js v4.0.1 (Custom Build on 2018-09-09) | MIT
 * Build: https://straker.github.io/kontra/download?files=gameLoop+sprite+assets+pointer+tileEngine
 */
kontra={init(t){var n=this.canvas=document.getElementById(t)||t||document.querySelector("canvas");this.context=n.getContext("2d")},_noop:new Function,_tick:new Function};
kontra.gameLoop=function(e){let t,n,a,r,o=(e=e||{}).fps||60,i=0,p=1e3/o,c=1/o,s=!1===e.clearCanvas?kontra._noop:function(){kontra.context.clearRect(0,0,kontra.canvas.width,kontra.canvas.height)};function d(){if(n=requestAnimationFrame(d),a=performance.now(),r=a-t,t=a,!(r>1e3)){for(kontra._tick(),i+=r;i>=p;)m.update(c),i-=p;s(),m.render()}}let m={update:e.update,render:e.render,isStopped:!0,start(){t=performance.now(),this.isStopped=!1,requestAnimationFrame(d)},stop(){this.isStopped=!0,cancelAnimationFrame(n)}};return m};
!function(){class t{constructor(t,i){this._x=t||0,this._y=i||0}add(t,i){this.x+=(t.x||0)*(i||1),this.y+=(t.y||0)*(i||1)}clamp(t,i,h,s){this._c=!0,this._a=t,this._b=i,this._d=h,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}set y(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}kontra.vector=((i,h)=>new t(i,h)),kontra.vector.prototype=t.prototype;class i{init(t,i,h,s){for(i in t=t||{},this.position=kontra.vector(t.x,t.y),this.velocity=kontra.vector(t.dx,t.dy),this.acceleration=kontra.vector(t.ddx,t.ddy),this.width=this.height=0,this.context=kontra.context,t)this[i]=t[i];if(h=t.image)this.image=h,this.width=h.width,this.height=h.height;else if(h=t.animations){for(i in h)this.animations[i]=h[i].clone(),s=s||h[i];this._ca=s,this.width=s.width,this.height=s.height}return this}get x(){return this.position.x}get y(){return this.position.y}get dx(){return this.velocity.x}get dy(){return this.velocity.y}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set x(t){this.position.x=t}set y(t){this.position.y=t}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}collidesWith(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}update(t){this.advance(t)}render(){this.draw()}playAnimation(t){this._ca=this.animations[t],this._ca.loop||this._ca.reset()}advance(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.ttl--,this._ca&&this._ca.update(t)}draw(){this.image?this.context.drawImage(this.image,this.x,this.y):this._ca?this._ca.render(this):(this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height))}}kontra.sprite=(t=>(new i).init(t)),kontra.sprite.prototype=i.prototype}();
!function(){let n,e=/(jpeg|jpg|gif|png)$/,t=/(wav|mp3|ogg|aac)$/,a=/^no$/,o=/^\//,i=/\/$/,r=new Audio,c={wav:"",mp3:r.canPlayType("audio/mpeg;").replace(a,""),ogg:r.canPlayType('audio/ogg; codecs="vorbis"').replace(a,""),aac:r.canPlayType("audio/aac;").replace(a,"")};function u(n,e){return[n.replace(i,""),n?e.replace(o,""):e].filter(n=>n).join("/")}function l(n){return n.split(".").pop()}function f(n){let e=n.replace("."+l(n),"");return 2==e.split("/").length?e.replace(o,""):e}function s(e,t){return new Promise(function(a,o){let i=new Image;t=u(n.imagePath,e),i.onload=function(){n.images[f(e)]=n.images[t]=this,a(this)},i.onerror=function(){o(t)},i.src=t})}function d(e,t,a){return new Promise(function(o,i){if(e=[].concat(e).reduce(function(n,e){return c[l(e)]?e:n},a)){let a=new Audio;t=u(n.audioPath,e),a.addEventListener("canplay",function(){n.audio[f(e)]=n.audio[t]=this,o(this)}),a.onerror=function(){i(t)},a.src=t,a.load()}else i(e)})}function p(e,t){return t=u(n.dataPath,e),fetch(t).then(function(n){if(!n.ok)throw n;return n.clone().json().catch(function(){return n.text()})}).then(function(a){return n.data[f(e)]=n.data[t]=a,a})}n=kontra.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load(){let n,a,o,i,r,c=[];for(i=0;o=arguments[i];i++)r=(a=l(n=[].concat(o)[0])).match(e)?s(o):a.match(t)?d(o):p(o),c.push(r);return Promise.all(c)}}}();
!function(){let n,t=[],e=[],o={},i=[],r={},a={0:"left",1:"middle",2:"right"};function c(t){let e=n.x-Math.max(t.x,Math.min(n.x,t.x+t.width)),o=n.y-Math.max(t.y,Math.min(n.y,t.y+t.height));return e*e+o*o<n.radius*n.radius}function u(){let o,i,r=e.length?e:t;for(let t=r.length-1;t>=0;t--)if(i=(o=r[t]).collidesWithPointer?o.collidesWithPointer(n):c(o))return o}function s(n){r[a[n.button]]=!0,h(n,"onDown")}function d(n){r[a[n.button]]=!1,h(n,"onUp")}function h(t,e){if(!kontra.canvas)return;let i,r,a;-1!==t.type.indexOf("mouse")?(i=t.clientX,r=t.clientY):(i=(t.touches[0]||t.changedTouches[0]).clientX,r=(t.touches[0]||t.changedTouches[0]).clientY),n.x=i-kontra.canvas.offsetLeft,n.y=r-kontra.canvas.offsetTop,t.target===kontra.canvas&&(a=u())&&a[e]&&a[e](),o[e]&&o[e](t,a)}addEventListener("mousedown",s),addEventListener("touchstart",s),addEventListener("mouseup",d),addEventListener("touchend",d),addEventListener("blur",function(n){r={}}),addEventListener("mousemove",function(n){h(n,"onOver")}),n=kontra.pointer={x:0,y:0,radius:5,track(n){[].concat(n).map(function(n){n._r||(n._r=n.render,n.render=function(){t.push(this),this._r()},i.push(n))})},untrack(n,t){[].concat(n).map(function(n){n.render=n._r,n._r=t;let e=i.indexOf(n);-1!==e&&i.splice(e,1)})},over:n=>-1!==i.indexOf(n)&&u()===n,onDown(n){o.onDown=n},onUp(n){o.onUp=n},pressed:n=>!!r[n]},kontra._tick=function(){e.length=0,t.map(function(n){e.push(n)}),t.length=0}}();
kontra.tileEngine=function(t){function e(t){let e,r;return void 0!==t.x&&void 0!==t.y?(e=p.getRow(t.y),r=p.getCol(t.x)):(e=t.row,r=t.col),e<0||r<0||e>=n||r>=s?-1:r+e*s}function r(t){let e,r,i=0,a=p.tilesets.length-1;for(;i<=a;){if(e=(i+a)/2|0,t>=(r=p.tilesets[e]).firstGrid&&t<=r.lastGrid)return r;r.lastGrid<t?i=e+1:a=e-1}}let i,a,s=(t=t||{}).width,n=t.height,l=t.tileWidth||t.tilewidth||32,o=t.tileHeight||t.tileheight||32,d=s*l,h=n*o,f=t.context||kontra.context,g=f.canvas.width,c=f.canvas.height,y=document.createElement("canvas"),u=y.getContext("2d"),m=Math.max(0,d-g),x=Math.max(0,h-c),w=[],p={width:s,height:n,tileWidth:l,tileHeight:o,mapWidth:d,mapHeight:h,context:f,x:t.x||0,y:t.y||0,tilesets:[],layers:{},addTilesets:function(t){[].concat(t).map(function(t){let e,r,i,a,s,n=t.image;if(""+n===n){let t=1/0;for(;t>=0;){let r=(t=n.lastIndexOf("/",t))<0?n:n.substr(t);if(kontra.assets.images[r]){e=kontra.assets.images[r];break}t--}}else e=n;r=t.firstGrid,i=(e.width/l|0||1)*(e.height/o|0||1),r||(p.tilesets.length>0?(s=((a=p.tilesets[p.tilesets.length-1]).image.width/l|0)*(a.image.height/o|0),r=a.firstGrid+s):r=1),p.tilesets.push({firstGrid:r,lastGrid:r+i-1,image:e}),p.tilesets.sort(function(t,e){return t.firstGrid-e.firstGrid})})},addLayers:function(t){[].concat(t).map(function(t){let e,r,i,a,n,l;if(t.render=void 0===t.render||t.render,Array.isArray(t.data[0]))for(e=[],r=0;i=t.data[r];r++)for(a=0;a<s;a++)e.push(i[a]||0);else e=t.data;for(n in p.layers[t.name]={data:e,zIndex:t.zIndex||0,render:t.render},t.properties){l=t.properties[n];try{l=JSON.parse(l)}catch(t){}p.layers[t.name][n]=l}p.layers[t.name].render&&(w.push(t.name),w.sort(function(t,e){return p.layers[t].zIndex-p.layers[e].zIndex}))}),function(){let t,e,i,a,n,d,h,f,g;for(let c,y=0;c=p.layers[w[y]];y++)for(let y=0,m=c.data.length;y<m;y++)(t=c.data[y])&&(i=(e=r(t)).image,a=y%s*l,n=(y/s|0)*o,d=(f=t-e.firstGrid)%(g=i.width/l)*l,h=(f/g|0)*o,u.drawImage(i,d,h,l,o,a,n,l,o))}()},layerCollidesWith:function(t,r){let i,a=p.getRow(r.y),s=p.getCol(r.x),n=p.getRow(r.y+r.height),l=p.getCol(r.x+r.width);for(let r=a;r<=n;r++)for(let a=s;a<=l;a++)if(i=e({row:r,col:a}),p.layers[t].data[i])return!0;return!1},tileAtLayer:function(t,r){let i=e(r);if(i>=0)return p.layers[t].data[i]},render:function(){p.context.drawImage(y,p.sx,p.sy,g,c,p.x,p.y,g,c)},renderLayer:function(t){let i,a,d,h,f,y,u,m,x,w=p.layers[t],G=p.getRow(),M=p.getCol(),I=e({row:G,col:M}),C=M*l-p.sx,v=G*o-p.sy,k=Math.min(Math.ceil(g/l)+1,s),R=k*Math.min(Math.ceil(c/o)+1,n),z=0;for(;z<R;)(d=w.data[I])&&(f=(h=r(d)).image,i=C+z%k*l,a=v+(z/k|0)*o,m=(y=d-h.firstGrid)%(u=f.width/l)*l,x=(y/u|0)*o,p.context.drawImage(f,m,x,l,o,i,a,l,o)),++z%k==0?I=M+ ++G*s:I++},getRow:function(t){return t=t||0,(p.sy+t)/o|0},getCol:function(t){return t=t||0,(p.sx+t)/l|0},get sx(){return i},get sy(){return a},set sx(t){i=Math.min(Math.max(0,t),m)},set sy(t){a=Math.min(Math.max(0,t),x)}};p.sx=t.sx||0,p.sy=t.sy||0,y.width=d,y.height=h;for(let e in t.properties){let r=t.properties[e];try{r=JSON.parse(r)}catch(t){}p[e]=p[e]||r}return t.tilesets&&p.addTilesets(t.tilesets),t.layers&&p.addLayers(t.layers),p};</script><script>window.k = window.kontra
</script><script>/**
 * This file is part of An Offline Life.
 *
 * An Offline Life is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * An Offline Life is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with An Offline Life.  If not, see <https://www.gnu.org/licenses/>.
 */

!function(){"use strict";const t={a:"d",ae:"d.mp3",g:"g",t:"t",te:"t.png",h:32,w:32,r:9,c:9,u:0,m:16,p:12,b1:13,b2:14,b3:15,s1:9,s2:10,s3:11},e=function(e){const{h:n,w:r}=t,o={...e,color:"#0000",height:n,width:r},s=k.sprite(o);return k.pointer.track(s),s};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=n(function(t){t.exports=((...t)=>{const e={};for(let n=0;n<t.length;n++)for(let r in t[n])t[n].hasOwnProperty(r)&&(e[r]=t[n][r]);return e})}),o=Object.freeze({default:r,__moduleExports:r}),s=o&&r||o,i=n(function(t){t.exports=(t=>{let e="function"==typeof(t=t||{}).initial?t.initial():{},n={},r={};const o=[()=>{for(let t in r){const n={};n[t]=r[t](),e=s(e,n)}}],i=t=>{o.slice().map(e=>{e(t)})};return{setState:t=>{e=s(e,t),i(e);for(let e of Object.values(t))"function"==typeof e.onChange&&e.onChange(t=>{i(t)})},action:t=>{n=s(n,t(()=>new Proxy(e,{set:(t,e,n)=>{t[e]=n,i(t)}})))},computed:t=>{r=s(r,t(()=>Object.freeze(e))),i(e)},actions:()=>n,state:()=>Object.freeze(e),onChange:t=>{o.push(t)}}})});const c=6,u=4,l=12,a="Not implemented.";class f{static get NUM_CHOICES(){return c}static get SECRET_LENGTH(){return u}static get NUM_GUESSES(){return l}get numChoices(){return this._opts.numChoices}get secretLength(){return this._opts.secretLength}get numGuesses(){return this._opts.numGuesses}constructor(t){t=t||{},this._opts={},this._opts.numChoices=t.numChoices||f.NUM_CHOICES,this._opts.secretLength=t.secretLength||f.SECRET_LENGTH,this._opts.numGuesses=t.numGuesses||f.NUM_GUESSES,this.secret=t.secret||this.makeSecret(this._opts.numChoices,this._opts.secretLength)}makeSecret(t,e){for(var n=[],r=0;r<e;r++)n.push(Math.floor(Math.random()*t)+1);return n}evaluateGuess(t){var e=this.secret.slice(),n={correctPosition:0,correctNumber:0};return t.filter(function(t,r){return e[r]!==t||(n.correctPosition++,e[r]=0,!1)}).forEach(function(t){var r=e.indexOf(t);r>-1&&(n.correctNumber++,e[r]=0)}),n}isGuessCorrect(t){return this.secret.reduce(function(e,n,r){return e&&t[r]===n},!0)}play(){throw new Error(a)}}var m=f;const h=function(t){const{gm:e,mm:n}=t,{l:r}=e,o=new m({numChoices:n.numChoices,secretLength:r});return{...t,mm:{...n,secretLength:r,secret:o.secret}}};let d={gm:{l:1,m:[],w:!1},mm:{numChoices:2}};var g=d=h(d);const p=function(e,n,r){const{s1:o,s2:s,s3:i}=t;return{x:1,y:1+n,value:void 0===r?i:!0===r?o:s}},b=function(t){return"s"+(1+t)},x=function(e){const n=e.gm,{m:r,l:o}=n;(function(e){const{s1:n,s2:r,s3:o}=t,s=[n,r,o];return e.map((t,e)=>({id:t,index:e})).filter(t=>s.includes(t.id)).map(t=>t.index)})(r).forEach((t,e)=>{const o=b(e),s=n[o],i=p(0,e,s);r[t]=i.value})},y=function(e){const{b1:n,b2:r,b3:o}=t,s=[n,r,o],i=e.map((t,e)=>({id:t,index:e})).filter(t=>s.includes(t.id)).map(t=>t.index);return i.reverse(),i},w=function(e,n,r){const{r:o,c:s,b1:i,b2:c,b3:u}=t;return{x:s-(1+n),y:o,value:void 0===r?c:!0===r?i:u}},v=function(t){return"b"+(1+t)},S=window.localStorage,E=JSON.parse(S.getItem("aol")),C=i({initial:()=>E||g}),_=function(t){!function(t){const e=t.gm,{m:n,l:r}=e;y(n).forEach((t,r)=>{const o=v(r),s=e[o],i=w(0,r,s);n[t]=i.value})}(t),x(t)};C.onChange(t=>{_(t),S.setItem("aol",JSON.stringify(t))});const N=function(t){t.forEach((e,n)=>{if(0===e){const e=function(t){return t[Math.floor(Math.random()*t.length)]}([1,2,3,4,5,6,7,8]);t[n]=e}})},G=[{id:1,t:!1,r:!1,b:!0,l:!0},{id:2,t:!0,r:!0,b:!1,l:!1},{id:3,t:!0,r:!1,b:!1,l:!0},{id:4,t:!1,r:!0,b:!0,l:!1},{id:5,t:!1,r:!0,b:!1,l:!0},{id:6,t:!0,r:!1,b:!0,l:!1},{id:7,t:!1,r:!1,b:!1,l:!1},{id:8,t:!0,r:!1,b:!0,l:!0},{id:9,t:!1,r:!0,b:!1,l:!1},{id:10,t:!1,r:!0,b:!1,l:!1},{id:11,t:!1,r:!0,b:!1,l:!1},{id:12,t:!0,r:!1,b:!1,l:!1},{id:13,t:!1,r:!1,b:!1,l:!1},{id:14,t:!1,r:!1,b:!1,l:!1},{id:15,t:!1,r:!1,b:!1,l:!1},{id:16,t:!1,r:!1,b:!0,l:!0}],L=function(e){const{c:n}=t,r=1+e%n;return{x:r,y:1+(e-(r-1))/n}},O=function(e,n){const{r,c:o,u:s,s1:i,s2:c,s3:u}=t,l=r*o,a=[s,i,c,u],f=e[n],m=n>=0&&n<l,h=a.includes(f);return m&&h},P=function(e,n){const{c:r}=t;return e-1+(n-1)*r},M=function(t){return t.id},U=function(t,e,n){const r=e.index,o=(e.id,L(r)),s=n.index,i=L(s),c=i.y-o.y,u=i.x-o.x,l=1===u,a=1===c,f=-1===u;let m="";-1===c&&n.b&&(m="b"),l&&n.l&&(m="l"),a&&n.t&&(m="t"),f&&n.r&&(m="r");const h=["t","r","b","l"].filter(t=>t!==m);return function(t,e,n){t.length;let r;return r=M(t[0]),e[n]=r,{index:n,id:r}}(G.filter(t=>t[m]).filter(t=>{return h.filter(e=>t[e]).length>0}).filter(e=>{return h.filter(t=>e[t]).map(t=>(function(t,e){let n;return"t"===e?n=P(t.x,t.y-1):"r"===e?n=P(t.x+1,t.y):"b"===e?n=P(t.x,t.y+1):"l"===e&&(n=P(t.x-1,t.y)),n})(i,t)).filter(e=>O(t,e)).length>0}),t,s)},H=function(t,e){const n=function(t,e){const n=e.index,r=e.id,{x:o,y:s}=L(n),i=G.find(t=>t.id===r),{t:c,r:u,b:l,l:a}=i,f=[];return c&&f.push(P(o,s-1)),u&&f.push(P(o+1,s)),l&&f.push(P(o,s+1)),a&&f.push(P(o-1,s)),function(t,e){t.length;const n=e||{};let r;return{index:r=t[0],...n}}(f.filter(e=>O(t,e)),{t:!(!c||!l)||!c,r:!(!a||!u)||!u,b:!(!c||!l)||!l,l:!(!a||!u)||!a})}(t,e);return U(t,e,n)},I=function(){return[...function(){const{r:e,c:n,m:r}=t;return[{x:n,y:e-1,value:r}]}(),...function(){const{r:e,c:n,p:r}=t;return[{x:e,y:n,value:r}]}(),...function(){const t=C.state().gm,{l:e}=t;return new Array(e).fill("").map((e,n)=>{const r=v(n),o=t[r];return w(0,n,o)})}(),...function(){const t=C.state().gm,{l:e}=t;return new Array(e).fill("").map((e,n)=>{const r=v(n),o=t[r];return p(0,n,o)})}()]},T=function(){const{r:e,c:n,u:r}=t,o=new Array(e*n).fill(r);I().forEach(t=>{const{x:e,y:n,value:r}=t,s=P(e,n);o[s]=r}),function(e){const{m:n}=t;let r={index:e.findIndex(t=>t===n),id:n};for(;1!=r.index;)r=H(e,r)}(o),N(o);const s=C.state();return C.setState({...s,gm:{...s.gm,m:o}}),o},j=function(e){const{g:n,t:r}=t;C.state().gm.l;e.addTilesets({image:r}),e.addLayers({name:n,data:function(){const t=C.state().gm.m;return t.length>0?t:T()}()})},z=function(){const e=C.state(),{a:n}=t,{gm:r,mm:o}=e,{l:s}=r,i=new m(o),c=function(e){const{m:n,l:r}=e,{b1:o,b3:s}=t,i=y(n).map(t=>n[t]).map(t=>t===o?2:t===s?1:"");return i.reverse(),i}(r),u=i.evaluateGuess(c);!function(t,e){const{m:n,l:r}=t.gm,{correctPosition:o,correctNumber:s}=e,i=[];for(let t=0;t<o;t++)i.push(!0);for(let t=0;t<s;t++)i.push(!1);let c=i.length;for(let t=c;t<r;t++)i.push(void 0);i.sort(),i.reverse(),c=i.length;for(let e=0;e<c;e++){const n=i.pop(),r=b(e);t.gm[r]=n}C.setState(t)}(e,u),function(t){const{correctPosition:e,correctNumber:n}=t;return e>0||n>0}(u)&&k.assets.audio[n].play();const{correctPosition:l}=u;l===s&&(7===s?(C.setState({...e,gm:{...r,m:r.m.map(()=>0)}}),window.online.className="back"):function(t,e){const n={...t,gm:{...e,l:e.l+1,m:[]}},r=h(n);C.setState(r)}(e,r))};const A={render:function(){const{gm:n}=C.state();if(function(){const{h:e,w:n,r,c:o}=t,s=k.tileEngine({tileHeight:e,tileWidth:n,height:r,width:o});return j(s),s}().render(),n.w)return;const{h:r,w:o}=t;let s;e({x:8*r,y:8*o,type:"p"}).render();for(let t=0;t<n.l;t++)(s=e({x:(7-t)*r,y:8*o,i:t})).render()},update:function(){k.pointer.onDown((t,e)=>{if("mousedown"===t.type&&e){const{type:t}=e;"p"===t?z():function(t){const e=C.state(),n=v(t.i),r=e.gm[n];C.setState({...e,gm:{...e.gm,[n]:!r}})}(e)}})}};(function(){const{ae:e,te:n}=t;return k.assets.imagePath="./",k.assets.audioPath="./",k.assets.load(e,n)})().then(()=>{k.init(),k.gameLoop(A).start()}).catch(()=>{})}();
</script></body></html>